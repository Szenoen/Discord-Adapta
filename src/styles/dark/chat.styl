/**
 * Chat (dark variant)
 */

.new-messages-bar, .jump-to-present-bar {
  background: alpha(accent-color, 75%)!important
  left: 0!important
  right: 0!important
  border-radius: 0!important
  if enable-backdrop and enable-backdrop isnt 'modals' {
    backdrop-filter: blur(5px)
  }

  button:last-child {
    color: lighten(accent-color, 60%)!important
  }
}

.chat .typing {
  bottom: -4px
  padding-left: 4px
}

.has-more button {
  background: alpha(accent-color, 75%)!important
  border: none!important
  color: white!important
}

.divider:not(.divider-red) div, .divider:not(.divider-red) span {
  background: rgba(0,0,0,.2)!important
}

.divider.divider-red>div {
  background: accent-color!important
}

.divider-red>span {
  color: accent-color!important
}

// code blocks and embeds
code, pre, .messages-popout .message-group, .invite-button {
  background: rgba(0,0,0,.1)!important
  .hljs { color: alpha(white, 50%) }
}

pre, .messages-popout .message-group, .invite-button {
  border-color: rgba(0,0,0,.2)!important
}

.embed {
  background: rgba(0,0,0,.05)!important
  border-color: rgba(0,0,0,.1)!important
}

.embed-color-pill:not([style]) {
  background-color: lighten(dark-base, 10%)!important
}

// Links

.chat .content a {
  color: accent-color!important
}

.highlight:not([style]), .mention:not([style]) {
  color: accent-color!important
  background: alpha(accent-color, 10%)!important
  &:hover {
    background: alpha(accent-color, 20%)!important
  }
}

.message.mentioned .message-text {
  background: alpha(accent-color, 20%)!important
  &::after {
    border-left: 4px solid accent-color!important
    background: alpha(accent-color, 20%)!important
  }
}

// Chat Form

.chat form {
  border: none!important
  box-shadow: none!important
  background: alpha(darken(dark-base, 50%), 40%)!important
  margin: 0
}

// Chat Form (overlay)
if chat-form-overlay {
  .chat form {
    if enable-backdrop and enable-backdrop isnt 'modals' {
      background: alpha(darken(dark-base, 30%), 50%)!important
    } else {
      background: alpha(darken(dark-base, 20%), 90%)!important
    }
  }

  .messages-wrapper {
    margin-bottom: -64px;
  }

  .scroller.messages {
    padding-bottom: 64px;
  }

  .jump-to-present-bar {
    bottom: 64px!important
  }
}

if enable-backdrop and enable-backdrop isnt 'modals' {
  .chat form {
    backdrop-filter: blur(10px)
  }
}

// Fix the overlayed dividers bug
.divider + .divider {
  opacity: 0!important
}

.channel-textarea {
  margin-top: 4px
  margin-bottom: 16px

  .channel-textarea-inner {
    border: none
    border-radius: 0
    background-color: transparent!important
    .channel-textarea-upload {
      border-right: none
    }
  }
}

.chat .bot-tag, .comment .bot-tag {
  background: accent-color!important
}

.edit-message .channel-textarea-inner {
  border-bottom: 2px solid accent-color!important
}
